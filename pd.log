[2023/06/15 23:19:53.427 +08:00] [INFO] [versioninfo.go:89] ["Welcome to Placement Driver (PD)"]
[2023/06/15 23:19:53.428 +08:00] [INFO] [versioninfo.go:90] [PD] [release-version=6fcc0cb-dirty]
[2023/06/15 23:19:53.428 +08:00] [INFO] [versioninfo.go:91] [PD] [edition=Community]
[2023/06/15 23:19:53.428 +08:00] [INFO] [versioninfo.go:92] [PD] [git-hash=6fcc0cb5701d6fdfcea95782a8f7c392022a7aec]
[2023/06/15 23:19:53.428 +08:00] [INFO] [versioninfo.go:93] [PD] [git-branch=master]
[2023/06/15 23:19:53.428 +08:00] [INFO] [versioninfo.go:94] [PD] [utc-build-time="2023-06-15 03:17:09"]
[2023/06/15 23:19:53.428 +08:00] [INFO] [metricutil.go:86] ["disable Prometheus push client"]
[2023/06/15 23:19:53.428 +08:00] [INFO] [server.go:242] ["PD config"] [config="{\"client-urls\":\"http://127.0.0.1:2379\",\"peer-urls\":\"http://127.0.0.1:2380\",\"advertise-client-urls\":\"http://127.0.0.1:2379\",\"advertise-peer-urls\":\"http://127.0.0.1:2380\",\"name\":\"pd\",\"data-dir\":\"/home/ubuntu/gopath/src/github.com/gottingen/tm/pd\",\"force-new-cluster\":false,\"enable-grpc-gateway\":true,\"initial-cluster\":\"pd=http://127.0.0.1:2380\",\"initial-cluster-state\":\"new\",\"initial-cluster-token\":\"pd-cluster\",\"join\":\"\",\"lease\":3,\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":false,\"file\":{\"filename\":\"pd.log\",\"max-size\":0,\"max-days\":0,\"max-backups\":0},\"development\":false,\"disable-caller\":false,\"disable-stacktrace\":false,\"disable-error-verbose\":true,\"sampling\":null,\"error-output-path\":\"\"},\"tso-save-interval\":\"3s\",\"tso-update-physical-interval\":\"50ms\",\"enable-local-tso\":false,\"metric\":{\"job\":\"pd\",\"address\":\"\",\"interval\":\"15s\"},\"schedule\":{\"max-snapshot-count\":64,\"max-pending-peer-count\":64,\"max-merge-region-size\":20,\"max-merge-region-keys\":0,\"split-merge-interval\":\"1h0m0s\",\"swtich-witness-interval\":\"1h0m0s\",\"enable-one-way-merge\":\"false\",\"enable-cross-table-merge\":\"true\",\"patrol-region-interval\":\"10ms\",\"max-store-down-time\":\"30m0s\",\"max-store-preparing-time\":\"48h0m0s\",\"leader-schedule-limit\":4,\"leader-schedule-policy\":\"count\",\"region-schedule-limit\":2048,\"witness-schedule-limit\":4,\"replica-schedule-limit\":64,\"merge-schedule-limit\":8,\"hot-region-schedule-limit\":4,\"hot-region-cache-hits-threshold\":3,\"store-limit\":{},\"tolerant-size-ratio\":0,\"low-space-ratio\":0.8,\"high-space-ratio\":0.7,\"region-score-formula-version\":\"v2\",\"scheduler-max-waiting-operator\":5,\"enable-remove-down-replica\":\"true\",\"enable-replace-offline-replica\":\"true\",\"enable-make-up-replica\":\"true\",\"enable-remove-extra-replica\":\"true\",\"enable-location-replacement\":\"true\",\"enable-debug-metrics\":\"false\",\"enable-joint-consensus\":\"true\",\"enable-tikv-split-region\":\"true\",\"schedulers-v2\":[{\"type\":\"balance-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"balance-leader\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"balance-witness\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"hot-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"transfer-witness-leader\",\"args\":null,\"disable\":false,\"args-payload\":\"\"}],\"schedulers-payload\":null,\"store-limit-mode\":\"manual\",\"hot-regions-write-interval\":\"10m0s\",\"hot-regions-reserved-days\":7,\"enable-diagnostic\":\"true\",\"enable-witness\":\"false\",\"slow-store-evicting-affected-store-ratio-threshold\":0.3,\"store-limit-version\":\"v1\"},\"replication\":{\"max-replicas\":3,\"location-labels\":\"\",\"strictly-match-label\":\"false\",\"enable-placement-rules\":\"true\",\"enable-placement-rules-cache\":\"false\",\"isolation-level\":\"\"},\"pd-server\":{\"use-region-storage\":\"true\",\"max-gap-reset-ts\":\"24h0m0s\",\"key-type\":\"table\",\"runtime-services\":\"\",\"metric-storage\":\"\",\"dashboard-address\":\"auto\",\"trace-region-flow\":\"true\",\"flow-round-by-digit\":3,\"min-resolved-ts-persistence-interval\":\"1s\",\"server-memory-limit\":0,\"server-memory-limit-gc-trigger\":0.7,\"enable-gogc-tuner\":\"false\",\"gc-tuner-threshold\":0.6},\"cluster-version\":\"0.0.0\",\"labels\":{},\"quota-backend-bytes\":\"8GiB\",\"auto-compaction-mode\":\"periodic\",\"auto-compaction-retention-v2\":\"1h\",\"TickInterval\":\"500ms\",\"ElectionInterval\":\"3s\",\"PreVote\":true,\"max-request-bytes\":157286400,\"security\":{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}},\"label-property\":null,\"WarningMsgs\":null,\"DisableStrictReconfigCheck\":false,\"HeartbeatStreamBindInterval\":\"1m0s\",\"LeaderPriorityCheckInterval\":\"1m0s\",\"dashboard\":{\"tidb-cacert-path\":\"\",\"tidb-cert-path\":\"\",\"tidb-key-path\":\"\",\"public-path-prefix\":\"\",\"internal-proxy\":false,\"enable-telemetry\":false,\"enable-experimental\":false},\"replication-mode\":{\"replication-mode\":\"majority\",\"dr-auto-sync\":{\"label-key\":\"\",\"primary\":\"\",\"dr\":\"\",\"primary-replicas\":0,\"dr-replicas\":0,\"wait-store-timeout\":\"1m0s\",\"pause-region-split\":\"false\"}},\"keyspace\":{\"pre-alloc\":null},\"controller\":{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.25,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}}"]
[2023/06/15 23:19:53.430 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/pd/api/v1]
[2023/06/15 23:19:53.430 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/pd/api/v2/]
[2023/06/15 23:19:53.430 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/swagger/]
[2023/06/15 23:19:53.430 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/autoscaling]
[2023/06/15 23:19:53.430 +08:00] [INFO] [distro.go:51] ["using distribution strings"] [strings={}]
[2023/06/15 23:19:53.431 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/dashboard/api/]
[2023/06/15 23:19:53.431 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/dashboard/]
[2023/06/15 23:19:53.431 +08:00] [INFO] [registry.go:92] ["restful API service registered successfully"] [prefix=pd] [service-name=MetaStorage]
[2023/06/15 23:19:53.431 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/resource-manager/api/v1/]
[2023/06/15 23:19:53.431 +08:00] [INFO] [registry.go:92] ["restful API service registered successfully"] [prefix=pd] [service-name=ResourceManager]
[2023/06/15 23:19:53.431 +08:00] [INFO] [etcd.go:117] ["configuring peer listeners"] [listen-peer-urls="[http://127.0.0.1:2380]"]
[2023/06/15 23:19:53.431 +08:00] [INFO] [systimemon.go:30] ["start system time monitor"]
[2023/06/15 23:19:53.431 +08:00] [INFO] [etcd.go:127] ["configuring client listeners"] [listen-client-urls="[http://127.0.0.1:2379]"]
[2023/06/15 23:19:53.431 +08:00] [INFO] [etcd.go:611] ["pprof is enabled"] [path=/debug/pprof]
[2023/06/15 23:19:53.431 +08:00] [INFO] [etcd.go:305] ["starting an etcd server"] [etcd-version=3.4.21] [git-sha="Not provided (use ./build instead of go build)"] [go-version=go1.20.5] [go-os=linux] [go-arch=amd64] [max-cpu-set=12] [max-cpu-available=12] [member-initialized=false] [name=pd] [data-dir=/home/ubuntu/gopath/src/github.com/gottingen/tm/pd] [wal-dir=] [wal-dir-dedicated=] [member-dir=/home/ubuntu/gopath/src/github.com/gottingen/tm/pd/member] [force-new-cluster=false] [heartbeat-interval=500ms] [election-timeout=3s] [initial-election-tick-advance=true] [snapshot-count=100000] [snapshot-catchup-entries=5000] [initial-advertise-peer-urls="[http://127.0.0.1:2380]"] [listen-peer-urls="[http://127.0.0.1:2380]"] [advertise-client-urls="[http://127.0.0.1:2379]"] [listen-client-urls="[http://127.0.0.1:2379]"] [listen-metrics-urls="[]"] [cors="[*]"] [host-whitelist="[*]"] [initial-cluster="pd=http://127.0.0.1:2380"] [initial-cluster-state=new] [initial-cluster-token=pd-cluster] [quota-backend-bytes=8589934592] [max-request-bytes=157286400] [max-concurrent-streams=4294967295] [pre-vote=true] [initial-corrupt-check=false] [corrupt-check-time-interval=0s] [auto-compaction-mode=periodic] [auto-compaction-retention=1h0m0s] [auto-compaction-interval=1h0m0s] [discovery-url=] [discovery-proxy=]
[2023/06/15 23:19:53.431 +08:00] [WARN] [server.go:297] ["exceeded recommended request limit"] [max-request-bytes=157286400] [max-request-size="157 MB"] [recommended-request-bytes=10485760] [recommended-request-size="10 MB"]
[2023/06/15 23:19:53.436 +08:00] [INFO] [backend.go:80] ["opened backend db"] [path=/home/ubuntu/gopath/src/github.com/gottingen/tm/pd/member/snap/db] [took=4.772723ms]
[2023/06/15 23:19:53.439 +08:00] [INFO] [raft.go:536] ["starting local member"] [local-member-id=3037d9ad26fb2231] [cluster-id=d985448f425c49d8]
[2023/06/15 23:19:53.439 +08:00] [INFO] [raft.go:1523] ["3037d9ad26fb2231 switched to configuration voters=()"]
[2023/06/15 23:19:53.439 +08:00] [INFO] [raft.go:706] ["3037d9ad26fb2231 became follower at term 0"]
[2023/06/15 23:19:53.439 +08:00] [INFO] [raft.go:389] ["newRaft 3037d9ad26fb2231 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"]
[2023/06/15 23:19:53.439 +08:00] [INFO] [raft.go:706] ["3037d9ad26fb2231 became follower at term 1"]
[2023/06/15 23:19:53.439 +08:00] [INFO] [raft.go:1523] ["3037d9ad26fb2231 switched to configuration voters=(3474484975246189105)"]
[2023/06/15 23:19:53.441 +08:00] [WARN] [store.go:1379] ["simple token is not cryptographically signed"]
[2023/06/15 23:19:53.445 +08:00] [INFO] [quota.go:126] ["enabled backend quota"] [quota-name=v3-applier] [quota-size-bytes=8589934592] [quota-size="8.6 GB"]
[2023/06/15 23:19:53.447 +08:00] [INFO] [server.go:816] ["starting etcd server"] [local-member-id=3037d9ad26fb2231] [local-server-version=3.4.21] [cluster-version=to_be_decided]
[2023/06/15 23:19:53.448 +08:00] [INFO] [server.go:682] ["started as single-node; fast-forwarding election ticks"] [local-member-id=3037d9ad26fb2231] [forward-ticks=5] [forward-duration=2.5s] [election-ticks=6] [election-timeout=3s]
[2023/06/15 23:19:53.449 +08:00] [INFO] [raft.go:1523] ["3037d9ad26fb2231 switched to configuration voters=(3474484975246189105)"]
[2023/06/15 23:19:53.449 +08:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=d985448f425c49d8] [local-member-id=3037d9ad26fb2231] [added-peer-id=3037d9ad26fb2231] [added-peer-peer-urls="[http://127.0.0.1:2380]"]
[2023/06/15 23:19:53.452 +08:00] [INFO] [etcd.go:247] ["now serving peer/client/metrics"] [local-member-id=3037d9ad26fb2231] [initial-advertise-peer-urls="[http://127.0.0.1:2380]"] [listen-peer-urls="[http://127.0.0.1:2380]"] [advertise-client-urls="[http://127.0.0.1:2379]"] [listen-client-urls="[http://127.0.0.1:2379]"] [listen-metrics-urls="[]"]
[2023/06/15 23:19:53.451 +08:00] [INFO] [etcd.go:585] ["serving peer traffic"] [address=127.0.0.1:2380]
[2023/06/15 23:19:54.440 +08:00] [INFO] [raft.go:929] ["3037d9ad26fb2231 is starting a new election at term 1"]
[2023/06/15 23:19:54.440 +08:00] [INFO] [raft.go:735] ["3037d9ad26fb2231 became pre-candidate at term 1"]
[2023/06/15 23:19:54.440 +08:00] [INFO] [raft.go:830] ["3037d9ad26fb2231 received MsgPreVoteResp from 3037d9ad26fb2231 at term 1"]
[2023/06/15 23:19:54.441 +08:00] [INFO] [raft.go:719] ["3037d9ad26fb2231 became candidate at term 2"]
[2023/06/15 23:19:54.441 +08:00] [INFO] [raft.go:830] ["3037d9ad26fb2231 received MsgVoteResp from 3037d9ad26fb2231 at term 2"]
[2023/06/15 23:19:54.441 +08:00] [INFO] [raft.go:771] ["3037d9ad26fb2231 became leader at term 2"]
[2023/06/15 23:19:54.441 +08:00] [INFO] [node.go:327] ["raft.node: 3037d9ad26fb2231 elected leader 3037d9ad26fb2231 at term 2"]
[2023/06/15 23:19:54.442 +08:00] [INFO] [server.go:2567] ["setting up initial cluster version"] [cluster-version=3.4]
[2023/06/15 23:19:54.442 +08:00] [INFO] [server.go:2069] ["published local member to cluster through raft"] [local-member-id=3037d9ad26fb2231] [local-member-attributes="{Name:pd ClientURLs:[http://127.0.0.1:2379]}"] [request-path=/0/members/3037d9ad26fb2231/attributes] [cluster-id=d985448f425c49d8] [publish-timeout=11s]
[2023/06/15 23:19:54.443 +08:00] [INFO] [etcdutil.go:267] ["create etcd v3 client"] [endpoints=http://127.0.0.1:2379]
[2023/06/15 23:19:54.443 +08:00] [INFO] [cluster.go:558] ["set initial cluster version"] [cluster-id=d985448f425c49d8] [local-member-id=3037d9ad26fb2231] [cluster-version=3.4]
[2023/06/15 23:19:54.443 +08:00] [INFO] [etcdutil.go:267] ["create etcd v3 client"] [endpoints=http://127.0.0.1:2379]
[2023/06/15 23:19:54.443 +08:00] [INFO] [capability.go:76] ["enabled capabilities for version"] [cluster-version=3.4]
[2023/06/15 23:19:54.444 +08:00] [INFO] [server.go:2599] ["cluster version is updated"] [cluster-version=3.4]
[2023/06/15 23:19:54.444 +08:00] [INFO] [registry.go:69] ["gRPC service already registered"] [prefix=pd] [service-name=MetaStorage]
[2023/06/15 23:19:54.444 +08:00] [INFO] [registry.go:69] ["gRPC service already registered"] [prefix=pd] [service-name=ResourceManager]
[2023/06/15 23:19:54.444 +08:00] [INFO] [serve.go:145] ["serving client traffic insecurely; this is strongly discouraged!"] [address=127.0.0.1:2379]
[2023/06/15 23:19:54.450 +08:00] [INFO] [server.go:410] ["init cluster id"] [cluster-id=7244932918413348678]
[2023/06/15 23:19:54.450 +08:00] [INFO] [member.go:333] ["member joining election"] [member-info="name:\"pd\" member_id:3474484975246189105 peer_urls:\"http://127.0.0.1:2380\" client_urls:\"http://127.0.0.1:2379\" "] [root-path=/pd/7244932918413348678]
[2023/06/15 23:19:54.463 +08:00] [INFO] [allocator_manager.go:676] ["entering into allocator daemon"]
[2023/06/15 23:19:54.464 +08:00] [INFO] [allocator_manager.go:410] ["delete the dc-location key previously written in etcd"] [server-id=3474484975246189105]
[2023/06/15 23:19:54.465 +08:00] [INFO] [history_buffer.go:154] ["start from history index"] [start-index=0]
[2023/06/15 23:19:54.470 +08:00] [INFO] [server.go:479] ["triggering the start callback functions"]
[2023/06/15 23:19:54.470 +08:00] [INFO] [manager.go:44] ["meta storage starts to initialize"] [name=pd]
[2023/06/15 23:19:54.470 +08:00] [INFO] [manager.go:83] ["resource group manager starts to initialize"] [name=pd]
[2023/06/15 23:19:54.471 +08:00] [INFO] [server.go:1506] ["start to campaign PD leader"] [campaign-leader-name=pd]
[2023/06/15 23:19:54.473 +08:00] [INFO] [lease.go:66] ["lease granted"] [lease-id=2463900827824381709] [lease-timeout=3] [purpose="leader election"]
[2023/06/15 23:19:54.475 +08:00] [INFO] [leadership.go:122] ["check campaign resp"] [resp="{\"header\":{\"cluster_id\":15674009460217235928,\"member_id\":3474484975246189105,\"revision\":6,\"raft_term\":2},\"succeeded\":true,\"responses\":[{\"Response\":{\"ResponsePut\":{\"header\":{\"revision\":6}}}}]}"]
[2023/06/15 23:19:54.475 +08:00] [INFO] [leadership.go:131] ["write leaderData to leaderPath ok"] [leaderPath=/pd/7244932918413348678/leader] [purpose="leader election"]
[2023/06/15 23:19:54.475 +08:00] [INFO] [server.go:1532] ["campaign PD leader ok"] [campaign-leader-name=pd]
[2023/06/15 23:19:54.475 +08:00] [INFO] [server.go:1540] ["initializing the global TSO allocator"]
[2023/06/15 23:19:54.475 +08:00] [INFO] [lease.go:139] ["start lease keep alive worker"] [interval=1s] [purpose="leader election"]
[2023/06/15 23:19:54.478 +08:00] [INFO] [tso.go:184] ["sync and save timestamp"] [last=0001/01/01 00:00:00.000 +00:00] [save=2023/06/15 23:19:57.476 +08:00] [next=2023/06/15 23:19:54.476 +08:00]
[2023/06/15 23:19:54.479 +08:00] [INFO] [server.go:1664] ["server enable region storage"]
[2023/06/15 23:19:54.481 +08:00] [INFO] [server.go:1569] ["triggering the leader callback functions"]
[2023/06/15 23:19:54.487 +08:00] [INFO] [manager.go:152] ["resource group manager finishes initialization"]
[2023/06/15 23:19:54.494 +08:00] [INFO] [id.go:174] ["idAllocator allocates a new id"] [new-end=1000] [new-base=0] [label=idalloc] [check-curr-end=true]
[2023/06/15 23:19:54.494 +08:00] [FATAL] [versioninfo.go:61] ["version string is illegal"] [error="[PD:semver:ErrSemverNewVersion]6fcc0cb is not in dotted-tri format: 6fcc0cb is not in dotted-tri format"] [stack="github.com/gottingen/tm/pkg/versioninfo.MustParseVersion\n\t/home/ubuntu/gopath/src/github.com/gottingen/tm/pkg/versioninfo/versioninfo.go:61\ngithub.com/gottingen/tm/server.CheckPDVersion\n\t/home/ubuntu/gopath/src/github.com/gottingen/tm/server/util.go:38\ngithub.com/gottingen/tm/server.(*Server).campaignLeader\n\t/home/ubuntu/gopath/src/github.com/gottingen/tm/server/server.go:1597\ngithub.com/gottingen/tm/server.(*Server).leaderLoop\n\t/home/ubuntu/gopath/src/github.com/gottingen/tm/server/server.go:1501"]
[2023/06/15 23:21:07.356 +08:00] [INFO] [versioninfo.go:89] ["Welcome to Placement Driver (PD)"]
[2023/06/15 23:21:07.356 +08:00] [INFO] [versioninfo.go:90] [PD] [release-version=6fcc0cb-dirty]
[2023/06/15 23:21:07.356 +08:00] [INFO] [versioninfo.go:91] [PD] [edition=Community]
[2023/06/15 23:21:07.356 +08:00] [INFO] [versioninfo.go:92] [PD] [git-hash=6fcc0cb5701d6fdfcea95782a8f7c392022a7aec]
[2023/06/15 23:21:07.356 +08:00] [INFO] [versioninfo.go:93] [PD] [git-branch=master]
[2023/06/15 23:21:07.356 +08:00] [INFO] [versioninfo.go:94] [PD] [utc-build-time="2023-06-15 03:17:09"]
[2023/06/15 23:21:07.356 +08:00] [INFO] [metricutil.go:86] ["disable Prometheus push client"]
[2023/06/15 23:21:07.356 +08:00] [INFO] [server.go:242] ["PD config"] [config="{\"client-urls\":\"http://127.0.0.1:2379\",\"peer-urls\":\"http://127.0.0.1:2380\",\"advertise-client-urls\":\"http://127.0.0.1:2379\",\"advertise-peer-urls\":\"http://127.0.0.1:2380\",\"name\":\"pd\",\"data-dir\":\"/home/ubuntu/gopath/src/github.com/gottingen/tm/pd\",\"force-new-cluster\":false,\"enable-grpc-gateway\":true,\"initial-cluster\":\"pd=http://127.0.0.1:2380\",\"initial-cluster-state\":\"new\",\"initial-cluster-token\":\"pd-cluster\",\"join\":\"\",\"lease\":3,\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":false,\"file\":{\"filename\":\"pd.log\",\"max-size\":0,\"max-days\":0,\"max-backups\":0},\"development\":false,\"disable-caller\":false,\"disable-stacktrace\":false,\"disable-error-verbose\":true,\"sampling\":null,\"error-output-path\":\"\"},\"tso-save-interval\":\"3s\",\"tso-update-physical-interval\":\"50ms\",\"enable-local-tso\":false,\"metric\":{\"job\":\"pd\",\"address\":\"\",\"interval\":\"15s\"},\"schedule\":{\"max-snapshot-count\":64,\"max-pending-peer-count\":64,\"max-merge-region-size\":20,\"max-merge-region-keys\":0,\"split-merge-interval\":\"1h0m0s\",\"swtich-witness-interval\":\"1h0m0s\",\"enable-one-way-merge\":\"false\",\"enable-cross-table-merge\":\"true\",\"patrol-region-interval\":\"10ms\",\"max-store-down-time\":\"30m0s\",\"max-store-preparing-time\":\"48h0m0s\",\"leader-schedule-limit\":4,\"leader-schedule-policy\":\"count\",\"region-schedule-limit\":2048,\"witness-schedule-limit\":4,\"replica-schedule-limit\":64,\"merge-schedule-limit\":8,\"hot-region-schedule-limit\":4,\"hot-region-cache-hits-threshold\":3,\"store-limit\":{},\"tolerant-size-ratio\":0,\"low-space-ratio\":0.8,\"high-space-ratio\":0.7,\"region-score-formula-version\":\"v2\",\"scheduler-max-waiting-operator\":5,\"enable-remove-down-replica\":\"true\",\"enable-replace-offline-replica\":\"true\",\"enable-make-up-replica\":\"true\",\"enable-remove-extra-replica\":\"true\",\"enable-location-replacement\":\"true\",\"enable-debug-metrics\":\"false\",\"enable-joint-consensus\":\"true\",\"enable-tikv-split-region\":\"true\",\"schedulers-v2\":[{\"type\":\"balance-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"balance-leader\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"balance-witness\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"hot-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"transfer-witness-leader\",\"args\":null,\"disable\":false,\"args-payload\":\"\"}],\"schedulers-payload\":null,\"store-limit-mode\":\"manual\",\"hot-regions-write-interval\":\"10m0s\",\"hot-regions-reserved-days\":7,\"enable-diagnostic\":\"true\",\"enable-witness\":\"false\",\"slow-store-evicting-affected-store-ratio-threshold\":0.3,\"store-limit-version\":\"v1\"},\"replication\":{\"max-replicas\":3,\"location-labels\":\"\",\"strictly-match-label\":\"false\",\"enable-placement-rules\":\"true\",\"enable-placement-rules-cache\":\"false\",\"isolation-level\":\"\"},\"pd-server\":{\"use-region-storage\":\"true\",\"max-gap-reset-ts\":\"24h0m0s\",\"key-type\":\"table\",\"runtime-services\":\"\",\"metric-storage\":\"\",\"dashboard-address\":\"auto\",\"trace-region-flow\":\"true\",\"flow-round-by-digit\":3,\"min-resolved-ts-persistence-interval\":\"1s\",\"server-memory-limit\":0,\"server-memory-limit-gc-trigger\":0.7,\"enable-gogc-tuner\":\"false\",\"gc-tuner-threshold\":0.6},\"cluster-version\":\"0.0.0\",\"labels\":{},\"quota-backend-bytes\":\"8GiB\",\"auto-compaction-mode\":\"periodic\",\"auto-compaction-retention-v2\":\"1h\",\"TickInterval\":\"500ms\",\"ElectionInterval\":\"3s\",\"PreVote\":true,\"max-request-bytes\":157286400,\"security\":{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}},\"label-property\":null,\"WarningMsgs\":null,\"DisableStrictReconfigCheck\":false,\"HeartbeatStreamBindInterval\":\"1m0s\",\"LeaderPriorityCheckInterval\":\"1m0s\",\"dashboard\":{\"tidb-cacert-path\":\"\",\"tidb-cert-path\":\"\",\"tidb-key-path\":\"\",\"public-path-prefix\":\"\",\"internal-proxy\":false,\"enable-telemetry\":false,\"enable-experimental\":false},\"replication-mode\":{\"replication-mode\":\"majority\",\"dr-auto-sync\":{\"label-key\":\"\",\"primary\":\"\",\"dr\":\"\",\"primary-replicas\":0,\"dr-replicas\":0,\"wait-store-timeout\":\"1m0s\",\"pause-region-split\":\"false\"}},\"keyspace\":{\"pre-alloc\":null},\"controller\":{\"degraded-mode-wait-duration\":\"0s\",\"request-unit\":{\"read-base-cost\":0.25,\"read-cost-per-byte\":0.0000152587890625,\"write-base-cost\":1,\"write-cost-per-byte\":0.0009765625,\"read-cpu-ms-cost\":0.3333333333333333}}}"]
[2023/06/15 23:21:07.358 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/pd/api/v1]
[2023/06/15 23:21:07.358 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/pd/api/v2/]
[2023/06/15 23:21:07.358 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/swagger/]
[2023/06/15 23:21:07.358 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/autoscaling]
[2023/06/15 23:21:07.358 +08:00] [INFO] [distro.go:51] ["using distribution strings"] [strings={}]
[2023/06/15 23:21:07.359 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/dashboard/api/]
[2023/06/15 23:21:07.359 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/dashboard/]
[2023/06/15 23:21:07.359 +08:00] [INFO] [registry.go:92] ["restful API service registered successfully"] [prefix=pd] [service-name=MetaStorage]
[2023/06/15 23:21:07.359 +08:00] [INFO] [apiutil.go:378] ["register REST path"] [path=/resource-manager/api/v1/]
[2023/06/15 23:21:07.359 +08:00] [INFO] [registry.go:92] ["restful API service registered successfully"] [prefix=pd] [service-name=ResourceManager]
[2023/06/15 23:21:07.359 +08:00] [INFO] [etcd.go:117] ["configuring peer listeners"] [listen-peer-urls="[http://127.0.0.1:2380]"]
[2023/06/15 23:21:07.359 +08:00] [INFO] [systimemon.go:30] ["start system time monitor"]
[2023/06/15 23:21:07.359 +08:00] [INFO] [etcd.go:127] ["configuring client listeners"] [listen-client-urls="[http://127.0.0.1:2379]"]
[2023/06/15 23:21:07.359 +08:00] [INFO] [etcd.go:611] ["pprof is enabled"] [path=/debug/pprof]
[2023/06/15 23:21:07.359 +08:00] [INFO] [etcd.go:305] ["starting an etcd server"] [etcd-version=3.4.21] [git-sha="Not provided (use ./build instead of go build)"] [go-version=go1.20.5] [go-os=linux] [go-arch=amd64] [max-cpu-set=12] [max-cpu-available=12] [member-initialized=true] [name=pd] [data-dir=/home/ubuntu/gopath/src/github.com/gottingen/tm/pd] [wal-dir=] [wal-dir-dedicated=] [member-dir=/home/ubuntu/gopath/src/github.com/gottingen/tm/pd/member] [force-new-cluster=false] [heartbeat-interval=500ms] [election-timeout=3s] [initial-election-tick-advance=true] [snapshot-count=100000] [snapshot-catchup-entries=5000] [initial-advertise-peer-urls="[http://127.0.0.1:2380]"] [listen-peer-urls="[http://127.0.0.1:2380]"] [advertise-client-urls="[http://127.0.0.1:2379]"] [listen-client-urls="[http://127.0.0.1:2379]"] [listen-metrics-urls="[]"] [cors="[*]"] [host-whitelist="[*]"] [initial-cluster=] [initial-cluster-state=new] [initial-cluster-token=] [quota-backend-bytes=8589934592] [max-request-bytes=157286400] [max-concurrent-streams=4294967295] [pre-vote=true] [initial-corrupt-check=false] [corrupt-check-time-interval=0s] [auto-compaction-mode=periodic] [auto-compaction-retention=1h0m0s] [auto-compaction-interval=1h0m0s] [discovery-url=] [discovery-proxy=]
[2023/06/15 23:21:07.359 +08:00] [WARN] [server.go:297] ["exceeded recommended request limit"] [max-request-bytes=157286400] [max-request-size="157 MB"] [recommended-request-bytes=10485760] [recommended-request-size="10 MB"]
[2023/06/15 23:21:07.359 +08:00] [INFO] [backend.go:80] ["opened backend db"] [path=/home/ubuntu/gopath/src/github.com/gottingen/tm/pd/member/snap/db] [took=73.307Âµs]
[2023/06/15 23:21:07.360 +08:00] [INFO] [raft.go:586] ["restarting local member"] [cluster-id=d985448f425c49d8] [local-member-id=3037d9ad26fb2231] [commit-index=16]
[2023/06/15 23:21:07.360 +08:00] [INFO] [raft.go:1523] ["3037d9ad26fb2231 switched to configuration voters=()"]
[2023/06/15 23:21:07.360 +08:00] [INFO] [raft.go:706] ["3037d9ad26fb2231 became follower at term 2"]
[2023/06/15 23:21:07.360 +08:00] [INFO] [raft.go:389] ["newRaft 3037d9ad26fb2231 [peers: [], term: 2, commit: 16, applied: 0, lastindex: 16, lastterm: 2]"]
[2023/06/15 23:21:07.362 +08:00] [WARN] [store.go:1379] ["simple token is not cryptographically signed"]
[2023/06/15 23:21:07.365 +08:00] [INFO] [quota.go:126] ["enabled backend quota"] [quota-name=v3-applier] [quota-size-bytes=8589934592] [quota-size="8.6 GB"]
[2023/06/15 23:21:07.367 +08:00] [INFO] [server.go:816] ["starting etcd server"] [local-member-id=3037d9ad26fb2231] [local-server-version=3.4.21] [cluster-version=to_be_decided]
[2023/06/15 23:21:07.367 +08:00] [INFO] [server.go:704] ["starting initial election tick advance"] [election-ticks=6]
[2023/06/15 23:21:07.367 +08:00] [INFO] [raft.go:1523] ["3037d9ad26fb2231 switched to configuration voters=(3474484975246189105)"]
[2023/06/15 23:21:07.367 +08:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=d985448f425c49d8] [local-member-id=3037d9ad26fb2231] [added-peer-id=3037d9ad26fb2231] [added-peer-peer-urls="[http://127.0.0.1:2380]"]
[2023/06/15 23:21:07.367 +08:00] [INFO] [cluster.go:558] ["set initial cluster version"] [cluster-id=d985448f425c49d8] [local-member-id=3037d9ad26fb2231] [cluster-version=3.4]
[2023/06/15 23:21:07.368 +08:00] [INFO] [capability.go:76] ["enabled capabilities for version"] [cluster-version=3.4]
[2023/06/15 23:21:07.368 +08:00] [INFO] [etcd.go:247] ["now serving peer/client/metrics"] [local-member-id=3037d9ad26fb2231] [initial-advertise-peer-urls="[http://127.0.0.1:2380]"] [listen-peer-urls="[http://127.0.0.1:2380]"] [advertise-client-urls="[http://127.0.0.1:2379]"] [listen-client-urls="[http://127.0.0.1:2379]"] [listen-metrics-urls="[]"]
[2023/06/15 23:21:07.368 +08:00] [INFO] [etcd.go:585] ["serving peer traffic"] [address=127.0.0.1:2380]
[2023/06/15 23:21:11.361 +08:00] [INFO] [raft.go:929] ["3037d9ad26fb2231 is starting a new election at term 2"]
[2023/06/15 23:21:11.361 +08:00] [INFO] [raft.go:735] ["3037d9ad26fb2231 became pre-candidate at term 2"]
[2023/06/15 23:21:11.361 +08:00] [INFO] [raft.go:830] ["3037d9ad26fb2231 received MsgPreVoteResp from 3037d9ad26fb2231 at term 2"]
[2023/06/15 23:21:11.361 +08:00] [INFO] [raft.go:719] ["3037d9ad26fb2231 became candidate at term 3"]
[2023/06/15 23:21:11.361 +08:00] [INFO] [raft.go:830] ["3037d9ad26fb2231 received MsgVoteResp from 3037d9ad26fb2231 at term 3"]
[2023/06/15 23:21:11.361 +08:00] [INFO] [raft.go:771] ["3037d9ad26fb2231 became leader at term 3"]
[2023/06/15 23:21:11.361 +08:00] [INFO] [node.go:327] ["raft.node: 3037d9ad26fb2231 elected leader 3037d9ad26fb2231 at term 3"]
[2023/06/15 23:21:11.363 +08:00] [INFO] [server.go:2069] ["published local member to cluster through raft"] [local-member-id=3037d9ad26fb2231] [local-member-attributes="{Name:pd ClientURLs:[http://127.0.0.1:2379]}"] [request-path=/0/members/3037d9ad26fb2231/attributes] [cluster-id=d985448f425c49d8] [publish-timeout=11s]
[2023/06/15 23:21:11.364 +08:00] [INFO] [etcdutil.go:267] ["create etcd v3 client"] [endpoints=http://127.0.0.1:2379]
[2023/06/15 23:21:11.364 +08:00] [INFO] [etcdutil.go:267] ["create etcd v3 client"] [endpoints=http://127.0.0.1:2379]
[2023/06/15 23:21:11.364 +08:00] [INFO] [registry.go:69] ["gRPC service already registered"] [prefix=pd] [service-name=MetaStorage]
[2023/06/15 23:21:11.364 +08:00] [INFO] [registry.go:69] ["gRPC service already registered"] [prefix=pd] [service-name=ResourceManager]
[2023/06/15 23:21:11.365 +08:00] [INFO] [serve.go:145] ["serving client traffic insecurely; this is strongly discouraged!"] [address=127.0.0.1:2379]
[2023/06/15 23:21:11.367 +08:00] [INFO] [server.go:410] ["init cluster id"] [cluster-id=7244932918413348678]
[2023/06/15 23:21:11.367 +08:00] [INFO] [member.go:333] ["member joining election"] [member-info="name:\"pd\" member_id:3474484975246189105 peer_urls:\"http://127.0.0.1:2380\" client_urls:\"http://127.0.0.1:2379\" "] [root-path=/pd/7244932918413348678]
[2023/06/15 23:21:11.384 +08:00] [INFO] [allocator_manager.go:676] ["entering into allocator daemon"]
[2023/06/15 23:21:11.385 +08:00] [INFO] [allocator_manager.go:410] ["delete the dc-location key previously written in etcd"] [server-id=3474484975246189105]
[2023/06/15 23:21:11.386 +08:00] [INFO] [history_buffer.go:154] ["start from history index"] [start-index=0]
[2023/06/15 23:21:11.394 +08:00] [INFO] [server.go:479] ["triggering the start callback functions"]
[2023/06/15 23:21:11.394 +08:00] [INFO] [manager.go:44] ["meta storage starts to initialize"] [name=pd]
[2023/06/15 23:21:11.394 +08:00] [INFO] [manager.go:83] ["resource group manager starts to initialize"] [name=pd]
[2023/06/15 23:21:11.395 +08:00] [WARN] [member.go:234] ["the pd leader has not changed, delete and campaign again"] [old-pd-leader="name:\"pd\" member_id:3474484975246189105 peer_urls:\"http://127.0.0.1:2380\" client_urls:\"http://127.0.0.1:2379\" "]
[2023/06/15 23:21:11.396 +08:00] [INFO] [leadership.go:171] ["delete the leader key ok"] [leaderPath=/pd/7244932918413348678/leader] [purpose="leader election"]
[2023/06/15 23:21:11.396 +08:00] [INFO] [server.go:1506] ["start to campaign PD leader"] [campaign-leader-name=pd]
[2023/06/15 23:21:11.398 +08:00] [INFO] [lease.go:66] ["lease granted"] [lease-id=2463900827843305484] [lease-timeout=3] [purpose="leader election"]
[2023/06/15 23:21:11.400 +08:00] [INFO] [leadership.go:122] ["check campaign resp"] [resp="{\"header\":{\"cluster_id\":15674009460217235928,\"member_id\":3474484975246189105,\"revision\":16,\"raft_term\":3},\"succeeded\":true,\"responses\":[{\"Response\":{\"ResponsePut\":{\"header\":{\"revision\":16}}}}]}"]
[2023/06/15 23:21:11.400 +08:00] [INFO] [leadership.go:131] ["write leaderData to leaderPath ok"] [leaderPath=/pd/7244932918413348678/leader] [purpose="leader election"]
[2023/06/15 23:21:11.400 +08:00] [INFO] [server.go:1532] ["campaign PD leader ok"] [campaign-leader-name=pd]
[2023/06/15 23:21:11.400 +08:00] [INFO] [server.go:1540] ["initializing the global TSO allocator"]
[2023/06/15 23:21:11.400 +08:00] [INFO] [lease.go:139] ["start lease keep alive worker"] [interval=1s] [purpose="leader election"]
[2023/06/15 23:21:11.404 +08:00] [INFO] [tso.go:184] ["sync and save timestamp"] [last=2023/06/15 23:19:57.476 +08:00] [save=2023/06/15 23:21:14.401 +08:00] [next=2023/06/15 23:21:11.401 +08:00]
[2023/06/15 23:21:11.406 +08:00] [INFO] [server.go:1664] ["server enable region storage"]
[2023/06/15 23:21:11.407 +08:00] [INFO] [server.go:1569] ["triggering the leader callback functions"]
[2023/06/15 23:21:11.409 +08:00] [WARN] [manager.go:144] ["init default group failed"] [error="[PD:resourcemanager:ErrResourceGroupAlreadyExists]the default resource group already exists"]
[2023/06/15 23:21:11.409 +08:00] [INFO] [manager.go:152] ["resource group manager finishes initialization"]
[2023/06/15 23:21:11.418 +08:00] [INFO] [id.go:174] ["idAllocator allocates a new id"] [new-end=2000] [new-base=1000] [label=idalloc] [check-curr-end=true]
[2023/06/15 23:21:11.418 +08:00] [FATAL] [versioninfo.go:61] ["version string is illegal"] [error="[PD:semver:ErrSemverNewVersion]6fcc0cb is not in dotted-tri format: 6fcc0cb is not in dotted-tri format"] [stack="github.com/gottingen/tm/pkg/versioninfo.MustParseVersion\n\t/home/ubuntu/gopath/src/github.com/gottingen/tm/pkg/versioninfo/versioninfo.go:61\ngithub.com/gottingen/tm/server.CheckPDVersion\n\t/home/ubuntu/gopath/src/github.com/gottingen/tm/server/util.go:38\ngithub.com/gottingen/tm/server.(*Server).campaignLeader\n\t/home/ubuntu/gopath/src/github.com/gottingen/tm/server/server.go:1597\ngithub.com/gottingen/tm/server.(*Server).leaderLoop\n\t/home/ubuntu/gopath/src/github.com/gottingen/tm/server/server.go:1501"]
